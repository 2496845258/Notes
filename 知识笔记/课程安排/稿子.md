
### 1. 前端应对网络传输慢的对策
#### 大图的由来
1. 减少网络请求次数
2. 每次传输假设固定花费20k的数据，一张小图标，才几k。
3. 把请求多个图片变成请求一个大图片，分区域显示不同内容，减少网络请求的不必要开销

#### ajax技术不仅仅是为局部刷新的效果
1. 每个页面重新加载渲染，浪费内存和空间
2. 并且跳转刷新，又需要重新向服务器请求资源来加载渲染（网络开销）
3. 那么局部刷新，只需要重新渲染一部分，只请求必要的资源，不必要的资源不请求

### 2. 后端应对网络传输的解决方案
#### 图片服务器（资源服务器）的由来
1. 一个页面由多个资源渲染组成
2. 一个域名最多同时发送6个请求（浏览器限制）
3. 把有限的请求资源专门用于做业务处理
4. 所以就把请求资源的请求，专门存放一个服务器（加速渲染效果）增加一个图片服务器，或者叫资源服务器进行加速页面的渲染，提高准备进行服务的速度

### 多申请几个域名
1. 没有浏览器对同一个域名最多6个连接
2. 申请多个域名解析到同一地址加速请求资源的速度

#### 多线程到线程池
1. 当多个请求到来时，才创建线程来处理非常缓慢
2. 每个线程大小1mb~6mb不等。创建速度非常缓慢，还要申请调度。
3. 所以从一开始就准备一些足够的线程去等待。减少不必要的开销。
4. 即使是线程池，操作系统在线程之间的转换也是很大的开销
5. 当请求太多的时候就得用消息队列的方式

#### 提出性能调优
1. jvm调优，减少老年代的gc
2. 代码运行方式上的优化减少内存开销。
3. 用更快的数据结构
4. hashmap引入红黑树
5. jdk11以后的字符串底层都变成了字节数组（速度更快）

#### 数据库层面的优化
1. sql优化
2. 减少数据库服务器和业务服务器之间的网络传输次数。增加一个缓存服务器

### 这一切的罪魁祸首http1.1协议应对大量的并发请求非常不友好
1. 上面讲了这多为什么要减少网络请求开销
2. http/1.1 是字符串协议
3. 大家做了那么多优化，协议本身却并不适合当前网络环境。

#### http/1.1的问题
1. 字符串协议 需要二次封装和拆解
2. 字符串协议 安全是问题
3. get请求直接把信息放入url
4. post请求把信息放入请求体，随便一抓包就能看见

#### http到https
1. https在http协议上面再加了一层加密协议ssl协议
2. http本身基于tcp，需要三次握手，本来就很慢了（光的传输10ms）还要3次，ssl再加了两次握手协商密钥。

#### 从https到http/2.0
1. 把字符串协议变成了字节协议 http/2.0 底层直接通过字节来交流
2. 加快了网络传输提升了20%的网络请求速度
3. http/2.0需要也需要ssl加密协议
4. 还是没解决基于tcp协议的队头阻塞问题


#### 从http/2.0到http/3.0
1. http/3.0